# Readme04 - 긴 문서 처리 파이프라인(Map-Reduce Summarization)

## 1. 왜 Map-Reduce 요약이 필요한가
Transformer 요약 모델은 한 번에 입력 가능한 토큰 길이가 제한됩니다. 회의록은 수천~수만 자가 될 수 있어 단일 호출로 처리하면 다음 문제가 발생합니다.

- 입력 길이 초과로 오류 발생
- 앞부분/뒷부분 정보 손실
- 처리 시간 급증

따라서 본 프로젝트는 **청크 단위 분할(Map) + 중간 요약 통합(Reduce)** 전략을 채택합니다.

## 2. Map 단계
1. 원문을 문단/줄 중심으로 분리
2. `CHUNK_MAX_TOKENS` 기준으로 청크 묶음 생성
3. 각 청크를 독립적으로 요약

이 단계의 목적은 긴 문서를 모델이 처리 가능한 작은 단위로 안전하게 변환하는 것입니다.

## 3. Reduce 단계
1. Map 단계에서 생성된 청크 요약들을 결합
2. `REDUCE_MAX_TOKENS` 기준으로 재정렬
3. 최종 요약 생성

필요하면 2차 Reduce(요약의 요약)를 통해 길이와 가독성을 균형화할 수 있습니다.

## 4. 장점
- 긴 문서 안정 처리
- 요약 실패율 감소
- 문서 전체 커버리지 확보

## 5. 트레이드오프
- API 호출 수 증가로 처리 시간 증가 가능
- 청크 경계에서 문맥이 끊길 수 있음
- 파라미터 튜닝이 필요함

## 6. 튜닝 가이드
- `CHUNK_MAX_TOKENS`를 너무 작게 하면 문맥 단절 증가
- 너무 크게 하면 속도 저하 및 길이 초과 위험 증가
- 회의록 평균 길이에 맞춰 경험적으로 조정 필요
